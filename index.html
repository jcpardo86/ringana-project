<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control de Ventas</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Archivo de estilos externo -->
  <link rel="stylesheet" href="style.css">
  <!-- Google API -->
  <script src="https://apis.google.com/js/api.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-white p-6 rounded-lg shadow-md">
    <div class="container">
                <!-- T√≠tulo -->
                <h1 class="text-4xl text-center font-bold">üìä RINGANA SALES</h1>
        
                <!-- Bot√≥n para dispositivos m√≥viles -->
                <button id="menuButton" class="md:hidden text-white focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
        
                <!-- Lista de navegaci√≥n -->
                <nav class="bg-gray-100 p-4 rounded-lg shadow-md mb-6">
                    <ul class="flex flex-wrap justify-center gap-4">
                        <li>
                            <button onclick="scrollToSection('ventas')" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 focus:outline-none transition">
                                üíº REGISTRAR VENTA
                            </button>
                        </li>
                        <li>
                            <button onclick="scrollToSection('meta')" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 focus:outline-none transition">
                                üèÜ META
                            </button>
                        </li>
                        <li>
                            <button onclick="scrollToSection('registradas')" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 focus:outline-none transition">
                                üìÖ VENTAS REGISTRADAS
                            </button>
                        </li>
                        <li>
                            <button onclick="scrollToSection('recursos')" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 focus:outline-none transition">
                                üë©‚Äçü¶∞ GESTI√ìN DE RECURSOS
                            </button>
                        </li>
                        <li>
                            <button onclick="scrollToSection('periodos')" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 focus:outline-none transition">
                                üéüÔ∏è PERIODOS DE FACTURACI√ìN
                            </button>
                        </li>
                        <li>
                            <button onclick="scrollToSection('datos')" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 focus:outline-none transition">
                                üìä GESTI√ìN DE DATOS
                            </button>
                        </li>
                    </ul>
                </nav>
                
        
        
        <!-- INICIO SECCI√ìN DE REGISTRO DE VENTAS -->
            <div id="ventas" class="mb-8 bg-gray-100 p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-center mb-6">üíº REGISTRAR VENTA</h2>
                <form>
                    <!-- Fecha de venta -->
                    <div class="mb-4">
                        <label for="fechaVenta" class="block font-medium mb-1">üìÖ Fecha de Venta</label>
                        <input id="fechaVenta" type="date" class="w-full border p-3 rounded-md focus:ring-2 focus:ring-blue-500">
                    </div>
            
                    <!-- Buscador r√°pido de Clientas -->
                    <div class="mb-2">
                        <label for="filtrarClientas" class="block font-medium mb-1">üë©‚Äçü¶∞ Clientas</label>
                        <input id="filtrarClientas" type="text" placeholder="Escribe para filtrar..." class="w-full border p-2 rounded-md">
                    </div>
                    
                    <!-- Selector de Clientas -->
                    <div class="mb-4">
                        <label for="selectClientas" class="block font-medium mb-1"></label>
                        <select id="selectClientas" multiple class="w-full border p-3 rounded-md focus:ring-2 focus:ring-blue-500">
                        <!-- Opciones din√°micas insertadas desde JavaScript -->
                        </select>
                        <small class="text-gray-500">* Mant√©n presionado "Ctrl" para seleccionar varias opciones.</small>
                    </div>
                    <!-- Buscador r√°pido de Productos -->
                    <div class="mb-2">
                        <label for="filtrarProductos" class="block font-medium mb-1">üõçÔ∏è Productos</label>
                        <input id="filtrarProductos" type="text" placeholder="Escribe para filtrar..." class="w-full border p-2 rounded-md">
                    </div>
                    
                    <!-- Selector de Productos -->
                    <div class="mb-4">
                        <label for="selectProductos" class="block font-medium mb-1"></label>
                        <select id="selectProductos" multiple class="w-full border p-3 rounded-md focus:ring-2 focus:ring-blue-500">
                        <!-- Opciones din√°micas insertadas desde JavaScript -->
                        </select>
                    </div>
      
            
                    <!-- Puntos por Producto -->
                    <div id="puntosPorProductoContainer" class="mb-4">
                        <!-- Los inputs din√°micos se a√±aden aqu√≠ con JavaScript -->
                    </div>
            
                    <!-- Bonos -->
                    <div class="mb-4">
                        <label for="selectBonos" class="block font-medium mb-1">üéÅ Bonos</label>
                        <select id="selectBonos" class="w-full border p-3 rounded-md focus:ring-2 focus:ring-blue-500">
                            <!-- Opciones din√°micas insertadas desde JavaScript -->
                        </select>
                    </div>
                    
                    <!-- Comentario -->
                    <div class="mb-4">
                        <label for="comentarioVenta" class="block font-medium mb-1">üìù Comentario</label>
                        <input id="comentarioVenta" type="text" placeholder="Escribe un comentario..." class="w-full border p-3 rounded-md focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <!-- Bot√≥n de registrar -->
                    <button 
                        type="button" 
                        onclick="registrarVenta()" 
                        class="w-full bg-gradient-to-r from-gray-400 via-gray-500 to-blue-600 text-white py-3 px-5 rounded-lg font-semibold shadow-md transform transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:ring-4 focus:ring-green-300">
                        ‚úÖ REGISTRAR VENTA
                    </button>
                </form>
            </div>
    
            <!-- Bot√≥n para volver arriba -->
            <div class="text-center mt-4">
                <button onclick="scrollToTop()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
                    ‚¨ÜÔ∏è Volver Arriba
                </button>
            </div>
    
            <!-- FIN SECCI√ìN DE REGISTRO DE VENTAS -->
            
    <!-- Separador de secciones -->
    <hr class="my-8">
            
        <!-- INICIO SECCI√ìN META -->
            <div id="meta" class="mb-8 bg-gray-100 p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-center mb-6">üèÜ META</h2>
                
                <!-- Tabla de puntos por periodo -->
                <div class="mb-6">
                    <!-- Selecci√≥n del periodo actual -->
                    <div class="flex flex-wrap gap-4 items-center justify-center mb-6">
                        <label for="selectPeriodoActual" class="text-lg font-medium">Periodo Actual:</label>
                        <select id="selectPeriodoActual" class="border p-2 rounded-lg w-full md:w-auto" onchange="actualizarDatosPeriodoActual()">
                            <!-- Opciones se llenar√°n din√°micamente -->
                        </select>
                    </div>
                    
                    <!-- Indicadores de progreso -->
                    <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                        <ul class="list-disc pl-5 text-gray-800 space-y-2 text-lg">
                            <li>
                                <span class="font-semibold text-blue-600">Meta Alcanzada:</span>
                                <span id="resultadoMeta">Selecciona un periodo para calcular.</span>
                            </li>
                            <li>
                                <span class="font-semibold text-green-600">Puntos restantes:</span>
                                <span id="resultadoPuntosRestantes">Selecciona un periodo para calcular.</span>
                            </li>
                            <li>
                                <span class="font-semibold text-yellow-500">Progreso a mitad del periodo:</span>
                                <span id="progresoMitadPeriodo">Selecciona un periodo para calcular.</span>
                            </li>
                            <li>
                                <span class="font-semibold text-red-500">D√≠as restantes:</span>
                                <span id="diasRestantes">Selecciona un periodo para calcular.</span>
                            </li>
                        </ul>
                        
                        <!-- Barra de progreso -->
                        <div class="mt-6 mb-4">
                            <h4 class="text-lg font-semibold mb-2">Progreso hacia la Meta:</h4>
                            <div class="barra-container">
                                <div class="w-full bg-gray-300 rounded-full h-6">
                                    <div id="barraProgreso" class="bg-green-400 h-6 rounded-full"></div>
                                </div>
                                <div class="texto-progreso mb-2" id="textoProgreso"></div>
                            </div>
                        </div>
                        
        
                <!-- Puntos por periodo -->
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-center mb-4">Puntos por Soci@s por periodo</h3>
                    <div class="flex flex-wrap gap-4 items-center justify-center mb-4">
                        <select id="selectSocio" class="border p-2 rounded-lg w-full md:w-auto">
                            <!-- Opciones se llenar√°n din√°micamente -->
                        </select>
                        <select id="selectPeriodo" class="border p-2 rounded-lg w-full md:w-auto">
                            <!-- Opciones se llenar√°n din√°micamente -->
                        </select>
                        <input id="puntosVE" type="number" placeholder="Puntos VE" class="border p-2 rounded-lg w-full md:w-auto">
                        <button onclick="registrarPuntosPorSocia()" class="bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600">‚ûï</button>
                    </div>
        
                    <!-- Tabla de puntos -->
                    <div class="overflow-auto">
                        <table class="min-w-full bg-white border rounded-lg">
                            <thead>
                                <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                                    <th class="py-2 px-4 text-left">Socio</th>
                                    <th class="py-2 px-4 text-left">Periodo</th>
                                    <th class="py-2 px-4 text-left">Puntos VE</th>
                                    <th class="py-2 px-4 text-center">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tablaPuntos" class="text-gray-600 text-sm">
                                <!-- Contenido din√°mico -->
                            </tbody>
                        </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Bot√≥n para volver arriba -->
            <div class="text-center mt-4">
                <button onclick="scrollToTop()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
                    ‚¨ÜÔ∏è Volver Arriba
                </button>
            </div>
    
    
    <!-- Separador de secciones -->
    <hr class="my-8">
    
    <!-- INICIO SECCI√ìN DE VENTAS REGISTRADAS -->
    <div id="registradas" class="mb-8 bg-gray-100 p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-center mb-6">üìÖ VENTAS REGISTRADAS</h2>
    
        <!-- Filtros y Buscador -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h3 class="text-lg font-semibold mb-4 text-gray-800">üîç Buscar y Filtrar Ventas</h3>
    
            <!-- Buscador -->
            <div class="flex flex-wrap items-center gap-4 mb-4">
                <input 
                    id="buscadorVentas" 
                    type="text" 
                    placeholder="Buscar por clienta, producto, comentario, etc." 
                    class="flex-1 border p-2 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" 
                    oninput="buscarEnTiempoReal()"
                >
            </div>
    
            <!-- Tipo de Filtro y Criterios -->
            <div class="flex flex-wrap items-center gap-4 mb-4">
                <label for="filtroTipo" class="block text-sm font-medium text-gray-700">Tipo de Filtro:</label>
                <select id="filtroTipo" class="border p-2 rounded-md focus:ring-blue-500 focus:border-blue-500" onchange="mostrarCriterio()">
                    <option value="">Seleccionar filtro</option>
                    <option value="ano">A√±o</option>
                    <option value="mes">Mes</option>
                    <option value="cliente">Clienta</option>
                    <option value="producto">Producto</option>
                    <option value="fecha">Entre fechas</option>
                </select>
    
                <!-- Criterios Din√°micos -->
                <div id="criteriosFiltro" class="flex items-center gap-4">
                    <!-- Los campos din√°micos generados por JS aparecer√°n aqu√≠ -->
                </div>
            </div>
    
            <!-- Botones de Acci√≥n -->
            <div class="flex justify-between">
                <button onclick="filtrarVentas()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 shadow-md transition">
                    Aplicar Filtros
                </button>
                <button onclick="restaurarFiltros()" class="bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 shadow-md transition">
                    Restaurar Filtros
                </button>
            </div>
        </div>
    
        <!-- Tabla de Ventas -->
        <div class="scrollable">
            <table class="min-w-full bg-white border rounded-lg">
                <thead>
                    <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                        <th class="py-2 px-4 text-left">Periodo de Facturaci√≥n</th>
                        <th class="py-2 px-4 text-left">Fecha</th>
                        <th class="py-2 px-4 text-left">Clientas</th>
                        <th class="py-2 px-4 text-left">Productos</th>
                        <th class="py-2 px-4 text-left">Puntos</th>
                        <th class="py-2 px-4 text-left">Bono</th>
                        <th class="py-2 px-4 text-left">Comentario</th>
                        <th class="py-2 px-4 text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaVentas" class="text-gray-600 text-sm">
                    <!-- Contenido din√°mico generado por JavaScript -->
                </tbody>
            </table>
        </div>
    
        <!-- Bot√≥n para Exportar a Excel -->
        <div class="text-center mt-4">
            <button onclick="exportarVentasExcel()" class="bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 shadow-md transition">
                üì• Exportar a Excel
            </button>
        </div>
    </div>
      <!-- Bot√≥n para volver arriba -->
      <div class="text-center mt-4">
        <button onclick="scrollToTop()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
            ‚¨ÜÔ∏è Volver Arriba
        </button>
    </div>
    
    <!-- Separador de secciones -->
    <hr class="my-8">
        
        <!-- INICIO SECCION GESTION DE RECURSOS -->
        <div id="recursos" class="mb-8 bg-gray-100 p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold text-center mb-6">üë©‚Äçü¶∞ GESTI√ìN DE RECURSOS</h2>
                <div class="grid grid-cols-1 gap-4">
                <!-- Productos -->
                <!-- Gesti√≥n de Recursos - Productos -->
                <div class="bg-gray-300 p-4 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-center mb-4">üõçÔ∏è Productos</h3>
                    
                    <!-- Inputs y Botones -->
                <div class="flex items-center gap-4">
                    <!-- Inputs -->
                    <!-- Ejemplo en la secci√≥n de Gesti√≥n de Productos -->
                    <input id="nuevoProducto" type="text" placeholder="Nombre del producto" class="flex-1 p-2 border rounded-md">
                    <input id="puntosProducto" type="number" placeholder="Puntos" class="w-24 p-2 border rounded-md" min="0">
                    <input id="mesAvisoProducto" type="number" placeholder="Meses de aviso" class="w-36 p-2 border rounded-md" min="0">
    
                    <!-- Botones (sin texto, solo √≠conos) -->
                    <button onclick="agregarProducto()" class="p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600">
                        ‚ûï
                    </button>
                    <button onclick="toggleProductos()" class="p-2 rounded-full bg-gray-500 text-white hover:bg-gray-600">
                        üëÅÔ∏è
                    </button>
                </div>
    
                <!-- Lista de Productos -->
                <div id="productos" class="scrollable mt-4 hidden">
                    <!-- Contenido din√°mico generado por JavaScript -->
                </div>
            </div>
    
                
    
                <!-- Clientas -->
                <div class="bg-gray-300 p-4 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-center mb-4">üë©‚Äçü¶∞ Clientas</h3>
                    <div class="flex items-center gap-2">
                        <input id="nuevaClienta" type="text" placeholder="Nueva clienta" class="flex-1 p-2 border rounded-md">
                        <button onclick="agregarClienta()" class="p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600">
                            ‚ûï
                        </button>
                        <button onclick="toggleClientas()" class="p-2 rounded-full bg-gray-500 text-white hover:bg-gray-600">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <div id="clientas" class="scrollable mt-2 hidden"></div>
                </div>
    
                <!-- Bonos -->
                <div class="bg-gray-300 p-4 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-center mb-4">üéÅ Bonos</h3>
                    <div class="flex items-center gap-2">
                        <input id="nuevoBono" type="text" placeholder="Nuevo bono" class="flex-1 p-2 border rounded-md">
                        <button onclick="agregarBono()" class="p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600">
                            ‚ûï
                        </button>
                        <button onclick="toggleBonos()" class="p-2 rounded-full bg-gray-500 text-white hover:bg-gray-600">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <div id="bonos" class="scrollable mt-2 hidden"></div>
                </div>
    
                <!-- Socios -->
                <div class="bg-gray-300 p-4 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold text-center mb-4">ü§ù Socios</h3>
                    <div class="flex items-center gap-2">
                        <input id="nuevoSocio" type="text" placeholder="Nuevo socio" class="flex-1 p-2 border rounded-md">
                        <button onclick="agregarSocio()" class="p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600">
                            ‚ûï
                        </button>
                        <button onclick="toggleSocios()" class="p-2 rounded-full bg-gray-500 text-white hover:bg-gray-600">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <div id="socios" class="scrollable mt-2 hidden"></div>
                </div>
            </div>
        </div>
        <!-- FIN SECCION GESTION DE RECURSOS -->
        
        <!-- Bot√≥n para volver arriba -->
        <div class="text-center mt-4">
            <button onclick="scrollToTop()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
                ‚¨ÜÔ∏è Volver Arriba
            </button>
        </div>
    
    <!-- Separador de secciones -->
    <hr class="my-8">
    
    
    <!-- INICIO SECCION PERIODOS DE FACTURACION -->
            <div id="periodos" class="mb-8 bg-gray-100 p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-center mb-6">üéüÔ∏è PERIODOS DE FACTURACI√ìN</h2>
                <div class="flex flex-wrap gap-2 mb-2">
                    <input id="nombrePeriodo" type="text" placeholder="Nombre del periodo (e.g., Marzo25)" class="border p-2">
                    <input id="fechaInicioPeriodo" type="date" class="border p-2">
                    <input id="fechaFinPeriodo" type="date" class="border p-2">
                    <button onclick="agregarPeriodo()" class="add-button"><span class="icon">‚ûï</span></button>
                </div>
                <div class="scrollable">
                    <table class="min-w-full bg-white mt-2">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border">Nombre del Periodo</th>
                                <th class="py-2 px-4 border">Fecha Inicio</th>
                                <th class="py-2 px-4 border">Fecha Fin</th>
                                <th class="py-2 px-4 border">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaPeriodos"></tbody>
                    </table>
                </div>
            </div>
    
            <!-- Bot√≥n para volver arriba -->
            <div class="text-center mt-4">
                <button onclick="scrollToTop()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
                    ‚¨ÜÔ∏è Volver Arriba
                </button>
            </div>
    
    <!-- Separador de secciones -->
    <hr class="my-8">
    
        <!-- Secci√≥n de exportar e importar -->
        <div id="datos" class="mb-8 bg-gray-100 p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-bold text-center mb-6">üìä GESTI√ìN DE DATOS</h2>
    
            <div class="mb-4">
                <h2 class="text-2xl font-semibold mb-2">Importar y Exportar üóÇÔ∏è</h2>
                <input type="file" id="importarArchivo" accept=".csv" class="mb-2">
                <button onclick="importarDatos()" class="bg-blue-500 text-white p-2 rounded">Importar</button>
                <button onclick="exportarDatos()" class="bg-red-500 text-white p-2 ml-2 rounded">Exportar</button>
            </div>
        
    
            <!-- Secci√≥n de copia de seguridad -->
            <div class="mb-4">
                <h2 class="text-2xl font-semibold mb-2">Copia de Seguridad üíæ</h2>
                <input type="file" id="cargarCopiaSeguridad" accept=".json" class="mt-2">
                <button onclick="restaurarCopiaSeguridad()" class="bg-blue-500 text-white p-2 ml-2 rounded">Restaurar CS</button>
                <button onclick="guardarCopiaSeguridad()" class="bg-red-500 text-white p-2 rounded">Guardar CS</button>
                <button onclick="borrarLocalStorage()" class="bg-red-500 text-white p-2 rounded-lg">Borrar Todo</button>
            </div>
        </div>  
    </div> 
    
        <!-- Bot√≥n para volver arriba -->
        <div class="text-center mt-4">
            <button onclick="scrollToTop()" class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600">
                ‚¨ÜÔ∏è Volver Arriba
            </button>
        </div>
    
    </div>
    <footer class="bg-gray-200 text-gray-700 p-6 rounded-lg shadow-md mt-8">
        <div class="text-center mb-2">
            <p class="text-lg font-semibold">Todos los derechos reservados</p>
            <p class="text-sm">Propiedad de <span class="font-medium">Juan Carlos Pardo</span></p>
        </div>
        <div class="text-center mt-4 text-xs text-gray-600">
            <p>Desarrollado con üíª y ‚ù§Ô∏è para organizar tus ventas de manera eficiente.</p>
        </div>
    </footer>
    <script src="script.js"></script>
</body>
</html>